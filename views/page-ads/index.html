<html lang="en">

<head>
    <title>{{.WebAppPageTitle}}</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="shortcut icon" href="/assets/media/logos/favicon-thpost.ico" />
    {{- template "resource-css" -}}
    <link rel="stylesheet" href="/page-ads/css/index.css">
    <!--end::custom css for this page-->
    <script>
        const basepath = "{{.Basepath}}";
    </script>

</head>

<body id="kt_app_body" class="background-page" data-kt-app-layout="light-sidebar" data-kt-app-header-fixed="true"
    data-kt-app-sidebar-enabled="true" data-kt-app-sidebar-fixed="false" data-kt-app-sidebar-hoverable="true"
    data-kt-app-sidebar-push-header="true" data-kt-app-sidebar-push-toolbar="true"
    data-kt-app-sidebar-push-footer="true" data-kt-app-toolbar-enabled="true" class="app-default">

    <div class=" d-flex justify-content-center align-items-center flex-column gap-2 login-box" id="kt_app_root">
        <div class="app-page w-100  flex-column flex-column-fluid " id="kt_app_page">
            <!-- HEADER -->
            <div id="kt_app_header" class="app-header bg-4461F2">
                {{- template "header" . -}}
            </div>
            <!-- HEADER -->

            <div class="app-wrapper  flex-column flex-row-fluid" id="kt_app_wrapper">
                <div id="kt_app_sidebar" class="app-sidebar flex-column" data-kt-drawer="true"
                    data-kt-drawer-name="app-sidebar" data-kt-drawer-activate="{default: true, lg: true}"
                    data-kt-drawer-overlay="true" data-kt-drawer-width="250px" data-kt-drawer-direction="start"
                    data-kt-drawer-toggle="#kt_app_sidebar_mobile_toggle">
                    {{- template "sidebar" . -}}

                </div>

                <div class="app-main flex-column flex-row-fluid" id="kt_app_main">
                    <div class="d-flex flex-column flex-column-fluid">
                        <div id="kt_app_toolbar" class="app-toolbar py-3 py-lg-6">
                            <div id="kt_app_toolbar_container" class="app-container container-fluid">

                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <!-- <h1 v-text="'ADS : as of ' + currentDate "></h1> -->
                                        <h1 class="text-center font-bold"
                                            v-if="startDate && endDate && startDate_status && endDate_status">
                                            ADS : as of <span v-text="formatDate(startDate)"></span>
                                            <span v-if="endDate && endDate_status"> to <span
                                                    v-text="formatDate(endDate)"></span></span>
                                        </h1>
                                        <h1 class="text-center font-bold" v-else>
                                            ADS : as of
                                            <span v-if="startDate_status" v-text="formatDate(startDate)"></span>
                                            <span v-else v-text="formatDate(endDate)"></span>
                                        </h1>
                                    </div>
                                    <div class="d-flex ">
                                        <!-- Start Date Picker -->
                                        <div class="w-550px input-group align-items-center" id="kt_td_picker_start"
                                            data-td-target-input="nearest" data-td-target-toggle="nearest">
                                            <div>
                                                <span class="fs-14 align-middle"
                                                    style="margin-right: 10px;">วันที่เริ่มต้น :</span>
                                            </div>
                                            <input id="kt_td_picker_start_input" type="text"
                                                class="form-control w-400px" data-td-target="#kt_td_picker_start" />
                                            <span class="input-group-text" data-td-target="#kt_td_picker_basic"
                                                data-td-toggle="datetimepicker">
                                                <i class="ki-duotone ki-calendar fs-2"><span class="path1"></span><span
                                                        class="path2"></span></i>
                                            </span>
                                        </div>
                                        <!-- End Date Picker -->
                                        <div class="w-550px input-group align-items-center" id="kt_td_picker_end"
                                            data-td-target-input="nearest" data-td-target-toggle="nearest">
                                            <div>
                                                <span class="fs-14 align-middle"
                                                    style="margin-right: 10px;">วันที่สิ้นสุด :</span>
                                            </div>
                                            <input id="kt_td_picker_end_input" type="text" class="form-control w-400px"
                                                data-td-target="#kt_td_picker_end" />
                                            <span class="input-group-text" data-td-target="#kt_td_picker_basic"
                                                data-td-toggle="datetimepicker">
                                                <i class="ki-duotone ki-calendar fs-2"><span class="path1"></span><span
                                                        class="path2"></span></i>
                                            </span>
                                        </div>
                                    </div>
                                </div>

                                <div class="mt-8">
                                    <div class="position-relative card p-5">
                                        <img class="position-absolute top-0 start-0 rounded-circle translate-middle"
                                            src="./page-ads/images/tiktok.webp" alt="" width="40" height="40">
                                        <div>
                                            <div class="table-responsive border rounded-4">
                                                <table class="table table-row-dashed table-row-gray-300 gy-6 gs-7 mb-0">
                                                    <thead>
                                                        <tr class="fw-bold fs-5">
                                                            <th class="min-w-100px align-middle">
                                                                <div @click="sortTable('p_date')"
                                                                    class="d-flex justify-content-around align-items-center pointer">
                                                                    <i class="bi-calendar3"></i>
                                                                    <span>วันที่</span>
                                                                    <i class="bi-chevron-down"
                                                                        :class="getSortIcon('p_date')"></i>
                                                                </div>
                                                            </th>
                                                            <th class="min-w-200px align-middle">
                                                                <div @click="sortTable('name')"
                                                                    class="d-flex justify-content-around align-items-center pointer">
                                                                    <i class="bi-type flex-shrink-1"></i>
                                                                    <div class="row w-100 ms-2">
                                                                        <span>ชื่อ</span>
                                                                        <span>ADS</span>
                                                                    </div>
                                                                    <i class="bi-chevron-down"
                                                                        :class="getSortIcon('name')"></i>
                                                                </div>
                                                            </th>
                                                            <th class="min-w-100px align-middle">
                                                                <div @click="sortTable('product')"
                                                                    class="d-flex justify-content-around align-items-center pointer">
                                                                    <i class="bi-type"></i>
                                                                    <div class="row">
                                                                        <span>สินค้า</span>
                                                                    </div>
                                                                    <i class="bi-chevron-down"
                                                                        :class="getSortIcon('product')"></i>
                                                                </div>
                                                            </th>
                                                            <th class="min-w-100px align-middle">
                                                                <div class="d-flex gap-3 align-items-center">
                                                                    <div @click="sortTable('status')"
                                                                        class="d-flex w-100 justify-content-around align-items-center pointer">
                                                                        <i class="bi-toggles"></i>
                                                                        <div class="row">
                                                                            <span>สถานะ</span>
                                                                        </div>
                                                                        <i class="bi-chevron-down"
                                                                            :class="getSortIcon('status')"></i>
                                                                    </div>
                                                                    <div class="flex-shrink-1">
                                                                        <i @click="filterModal('สถานะ', 1)"
                                                                            class="pointer bi-funnel"></i>
                                                                    </div>
                                                                </div>
                                                            </th>
                                                            <th class="min-w-100px align-middle">
                                                                <div @click="sortTable('total_cost')"
                                                                    class="d-flex justify-content-around align-items-center pointer">
                                                                    <i class="bi-cash-stack"></i>
                                                                    <div class="row ms-2">
                                                                        <span>ค่าใช้จ่ายทั้งหมด</span>
                                                                    </div>
                                                                    <i class="bi-chevron-down"
                                                                        :class="getSortIcon('total_cost')"></i>
                                                                </div>
                                                            </th>
                                                            <th class="min-w-100px align-middle">
                                                                <div @click="sortTable('budget')"
                                                                    class="d-flex justify-content-around align-items-center pointer">
                                                                    <i class="bi-cash-stack"></i>
                                                                    <div class="row">
                                                                        <span>งบประมาณ</span>
                                                                    </div>
                                                                    <i class="bi-chevron-down"
                                                                        :class="getSortIcon('budget')"></i>
                                                                </div>
                                                            </th>
                                                            <th class="min-w-150px align-middle">
                                                                <div @click="sortTable('total_shop_income')"
                                                                    class="d-flex justify-content-around align-items-center pointer">
                                                                    <i class="bi-cash-stack"></i>
                                                                    <div class="row">
                                                                        <span>รายได้รวม(ร้านค้า)</span>
                                                                    </div>
                                                                    <i class="bi-chevron-down"
                                                                        :class="getSortIcon('total_shop_income')"></i>
                                                                </div>
                                                            </th>
                                                            <th class="min-w-200px align-middle">
                                                                <div @click="sortTable('cost_per_purchase')"
                                                                    class="d-flex justify-content-around align-items-center pointer">
                                                                    <i class="bi-cash-stack"></i>
                                                                    <div class="row">
                                                                        <span>ต้นทุนต่อการซื้อ(ร้านค้า)</span>
                                                                    </div>
                                                                    <i class="bi-chevron-down"
                                                                        :class="getSortIcon('cost_per_purchase')"></i>
                                                                </div>
                                                            </th>
                                                            <th class="min-w-150px align-middle">
                                                                <div @click="sortTable('note')"
                                                                    class="d-flex justify-content-around align-items-center pointer">
                                                                    <div class="row">
                                                                        <span>โน๊ต</span>
                                                                    </div>
                                                                    <i class="bi-chevron-down"
                                                                        :class="getSortIcon('note')"></i>
                                                                </div>
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody class="fs-6">
                                                        <template v-for="item in data_ads">
                                                            <tr>
                                                                <td class="align-middle  text-break">
                                                                    <span v-text="utilsConvDate(item.p_date)"></span>
                                                                </td>
                                                                <td class="align-middle  text-break">
                                                                    <span v-text="item.name"></span>
                                                                </td>
                                                                <td class="align-middle  text-break">
                                                                    <span v-text="item.product"></span>
                                                                </td>
                                                                <td class="align-middle  text-break text-center">
                                                                    <span
                                                                        v-if="item.status === 'เปิดใช้งาน' || item.status === 'active'"
                                                                        v-text="'เปิดใช้งาน'"
                                                                        class="text-success"></span>
                                                                    <span v-else v-text="'ปิดการใช้งาน'"
                                                                        class="text-danger"></span>
                                                                </td>
                                                                <td class="align-middle  text-center text-break">
                                                                    <span v-text="formatNumber(item.total_cost)"></span>
                                                                </td>
                                                                <td class="align-middle  text-center text-break">
                                                                    <span v-text="formatNumber(item.budget)"></span>
                                                                </td>
                                                                <td class="align-middle  text-center text-break">
                                                                    <span
                                                                        v-text="formatNumber(item.total_shop_income)"></span>
                                                                </td>
                                                                <td class="align-middle  text-center text-break">
                                                                    <span
                                                                        v-text="formatNumber(item.cost_per_purchase)"></span>
                                                                </td>
                                                                <td class="align-middle  text-break">
                                                                    <span v-text="item.note"></span>
                                                                </td>
                                                            </tr>
                                                        </template>
                                                    </tbody>
                                                    <tfoot class="border-top border-1 fs-6 fw-bold">
                                                        <tr>
                                                            <td class="align-middle text-break"></td>
                                                            <td class="align-middle text-break"></td>
                                                            <td class="align-middle text-break"></td>
                                                            <td class="align-middle text-break"></td>
                                                            <td class="align-middle text-break text-center"
                                                                v-text="formatNumber(TTTotal)">
                                                            </td>
                                                            <td class="align-middle text-break text-center"
                                                                v-text="formatNumber(TTBudget)"></td>
                                                            <td class="align-middle text-break text-center"
                                                                v-text="formatNumber(TTTotal_Incom)"></td>
                                                            <td class="align-middle text-break text-center"
                                                                v-text="formatNumber(TTTotal/TTCost_Per)"></td>
                                                            <td class="align-middle text-break"></td>
                                                            <td class="align-middle text-break"></td>
                                                        </tr>
                                                    </tfoot>
                                                </table>
                                            </div>
                                            <div class="d-flex justify-content-between align-items-center mt-3">
                                                <div class="d-flex">
                                                    <div>
                                                        <select class="form-select w-80px h-35px"
                                                            data-hide-search="true" data-control="select2"
                                                            id="page_size_select" name="page_size_select">
                                                            <option value="10" selected>10</option>
                                                            <option value="20">20</option>
                                                            <option value="50">50</option>
                                                            <option value="100">100</option>
                                                        </select>
                                                    </div>
                                                    <div class="d-flex align-items-end ms-5">
                                                        <span>
                                                            กำลังแสดง
                                                            <span v-text="tiktokStartItem"></span>
                                                            ถึง
                                                            <span v-text="tiktokEndItem"></span>
                                                            จาก
                                                            <span v-text="totalItems"></span> รายการ
                                                            <span v-if="totalItems > 10"></span>
                                                        </span>
                                                    </div>
                                                </div>
                                                <ul class="pagination">
                                                    <li :class="['page-item', { disabled: currentPages === 1 }]"
                                                        @click="changePage(currentPages - 1)">
                                                        <p class="page-link"><i class="previous"></i></p>
                                                    </li>
                                                    <li v-for="page in pages" :key="page"
                                                        :class="['page-item', { active: currentPages === page && page !== '...' }]"
                                                        @click="changePage(page)">
                                                        <p class="page-link" v-if="page !== '...'" v-text="page"></p>
                                                        <span v-if="page === '...'">...</span>
                                                    </li>
                                                    <li :class="['page-item', { disabled: currentPages === totalPages }]"
                                                        @click="changePage(currentPages + 1)">
                                                        <p class="page-link"><i class="next"></i></p>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row gap-5 px-3 mt-5">
                                    <div class="card p-5 col-6">
                                        <div class="table-responsive border rounded-4">
                                            <table class="table table-row-dashed table-row-gray-300 gy-6 gs-7 mb-0">
                                                <thead>
                                                    <tr class="fw-bold fs-4 ">
                                                        <th class="min-w-100px">
                                                            <div @click="sortCostTable('p_date')"
                                                                class="d-flex justify-content-around align-items-center pointer">
                                                                <i class="bi-calendar3"></i>
                                                                <span>วันที่</span>
                                                                <i class="bi-chevron-down"
                                                                    :class="getCostSortIcon('p_date')"></i>
                                                            </div>
                                                        </th>
                                                        <th class="min-w-200px">
                                                            <div class="d-flex gap-3 align-items-center">
                                                                <div @click="sortCostTable('shop_name')"
                                                                    class="d-flex w-100 justify-content-between align-items-center pointer">
                                                                    <span>ร้าน</span>
                                                                    <i class="bi-chevron-down"
                                                                        :class="getCostSortIcon('shop_name')"></i>
                                                                </div>
                                                                <div class="flex-shrink-1">
                                                                    <i @click="filterModal('ร้าน', 2)"
                                                                        class="pointer bi-funnel"></i>
                                                                </div>
                                                            </div>
                                                        </th>
                                                        <th class="min-w-100px">
                                                            <div @click="sortCostTable('ads_fee')"
                                                                class="d-flex justify-content-between align-items-center pointer">
                                                                <span>ค่าแอด</span>
                                                                <i class="bi-chevron-down"
                                                                    :class="getCostSortIcon('ads_fee')"></i>
                                                            </div>
                                                        </th>
                                                        <th class="min-w-100px">
                                                            <div @click="sortCostTable('ads_income')"
                                                                class="d-flex justify-content-between align-items-center pointer">
                                                                <span>รายได้แอด</span>
                                                                <i class="bi-chevron-down"
                                                                    :class="getCostSortIcon('ads_income')"></i>
                                                            </div>
                                                        </th>
                                                        <th class="min-w-100px">
                                                            <div @click="sortCostTable('ads_total_income')"
                                                                class="d-flex justify-content-between align-items-center pointer">
                                                                <span>รายได้รวม</span>
                                                                <i class="bi-chevron-down"
                                                                    :class="getCostSortIcon('ads_total_income')"></i>
                                                            </div>
                                                        </th>
                                                        <th class="min-w-100px">
                                                            <div
                                                                class="d-flex justify-content-between align-items-center">
                                                                <span>เปอร์เซ็น</span>
                                                                <!-- <i class="bi-chevron-down"></i> -->
                                                            </div>
                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody class="fs-6">
                                                    <template v-for="item in data_ads_cost">
                                                        <tr>
                                                            <td class="align-middle min-w-100px text-break">
                                                                <span v-text="utilsConvDate(item.p_date)"></span>
                                                            </td>
                                                            <td class="align-middle min-w-200px text-break">
                                                                <span v-text="item.shop_name"></span>
                                                            </td>
                                                            <td class="align-middle min-w-100px text-break">
                                                                <span v-text="formatNumber(item.ads_fee)"></span>
                                                            </td>
                                                            <td class="align-middle min-w-100px text-break">
                                                                <span v-text="formatNumber(item.ads_income)"></span>
                                                            </td>
                                                            <td class="align-middle min-w-100px text-break">
                                                                <span
                                                                    v-text="formatNumber(item.ads_total_income)"></span>
                                                            </td>
                                                            <td class="align-middle min-w-100px text-break">
                                                                <span
                                                                    v-text="formatPercentage(item.ads_fee, item.ads_total_income)"></span>
                                                            </td>
                                                        </tr>
                                                    </template>
                                                </tbody>
                                                <tfoot class="border-top border-1 fs-6 fw-bold">
                                                    <tr>
                                                        <td class="align-middle min-w-100px text-break"></td>
                                                        <td class="align-middle min-w-200px text-break"></td>
                                                        <td class="align-middle min-w-100px text-break"
                                                            v-text="formatNumber(AdsFee)">
                                                        </td>
                                                        <td class="align-middle min-w-100px text-break"
                                                            v-text="formatNumber(AdsIncome)"></td>
                                                        <td class="align-middle min-w-100px text-break"
                                                            v-text="formatNumber(totalAdsIncome)"></td>
                                                        <td class="align-middle min-w-100px text-break"
                                                            v-text="formatPercentage(AdsFee, totalAdsIncome)"></td>
                                                    </tr>
                                                </tfoot>
                                            </table>
                                        </div>
                                        <div class="d-flex justify-content-between align-items-center mt-3">
                                            <div class="d-flex">
                                                <div>
                                                    <select class="form-select w-80px h-35px" data-hide-search="true"
                                                        data-control="select2" id="page_size_cost_select"
                                                        name="page_size_cost_select">
                                                        <option value="10" selected>10</option>
                                                        <option value="20">20</option>
                                                        <option value="50">50</option>
                                                        <option value="100">100</option>
                                                    </select>
                                                </div>
                                                <div class="d-flex align-items-end ms-5">
                                                    <span>
                                                        กำลังแสดง
                                                        <span v-text="costStartItem"></span>
                                                        ถึง
                                                        <span v-text="costEndItem"></span>
                                                        จาก
                                                        <span v-text="totalCostItems"></span> รายการ
                                                        <span v-if="totalCostItems > 10"></span>
                                                    </span>
                                                </div>
                                            </div>
                                            <ul class="pagination">
                                                <li :class="['page-item', { disabled: currentCostPages === 1 }]"
                                                    @click="changeCostPage(currentCostPages - 1)">
                                                    <p class="page-link"><i class="previous"></i></p>
                                                </li>
                                                <li v-for="page_cost in pagesCost" :key="page_cost"
                                                    :class="['page-item', { active: currentCostPages === page_cost && page_cost !== '...' }]"
                                                    @click="changeCostPage(page_cost)">
                                                    <p class="page-link" v-if="page_cost !== '...'" v-text="page_cost">
                                                    </p>
                                                    <span v-if="page_cost === '...'">...</span>
                                                </li>
                                                <li :class="['page-item', { disabled: currentCostPages === totalCostPages }]"
                                                    @click="changeCostPage(currentCostPages + 1)">
                                                    <p class="page-link"><i class="next"></i></p>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="card p-5 col">
                                        <div
                                            class="fs-2 fw-bolder text-dark d-flex gap-4 justify-content-center align-items-center w-100 mt-0 my-3 text-center">
                                            <i class="fs-2 bi-tiktok"></i>
                                            <span>Tiktok Live</span>
                                        </div>
                                        <div class="table-responsive border rounded-4">
                                            <table class="table table-row-dashed table-row-gray-300 gy-6 gs-7 mb-0">
                                                <thead>
                                                    <tr class="fw-bold fs-4 ">
                                                        <th class="min-w-100px">
                                                            <div @click="sortTiktokTable('p_timestamp')"
                                                                class="d-flex w-100 justify-content-between align-items-center">
                                                                <span>วันที่</span>
                                                                <i class="bi-chevron-down"
                                                                    :class="getTiktokSortIcon('p_timestamp')"></i>
                                                            </div>
                                                        </th>
                                                        <th class="min-w-200px">
                                                            <div @click="sortTiktokTable('total_cost')"
                                                                class="d-flex w-100 justify-content-between align-items-center">
                                                                <span>ค่าใช้จ่ายทั้งหมด</span>
                                                                <i class="bi-chevron-down"
                                                                    :class="getTiktokSortIcon('total_cost')"></i>
                                                            </div>
                                                        </th>
                                                        <th class="min-w-100px">
                                                            <div @click="sortTiktokTable('total_income')"
                                                                class="d-flex w-100 justify-content-between align-items-center">
                                                                <span>รายได้รวม(ร้านค้า)</span>
                                                                <i class="bi-chevron-down"
                                                                    :class="getTiktokSortIcon('total_income')"></i>
                                                            </div>
                                                        </th>
                                                        <th class="min-w-100px">
                                                            <div class="d-flex gap-3 align-items-center">
                                                                <div @click="sortTiktokTable('shop_name')"
                                                                    class="d-flex w-100 justify-content-between align-items-center">
                                                                    <span>ช่องทาง</span>
                                                                    <i class="bi-chevron-down"
                                                                        :class="getTiktokSortIcon('shop_name')"></i>
                                                                </div>
                                                                <div class="flex-shrink-1">
                                                                    <i @click="filterModal('ช่องทาง', 3)"
                                                                        class="pointer bi-funnel"></i>
                                                                </div>
                                                            </div>
                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody class="fs-6">
                                                    <template v-for="item in data_tiktok_live">
                                                        <tr>
                                                            <td class="align-middle text-break">
                                                                <span v-text="utilsConvDate(item.p_timestamp)"></span>
                                                            </td>
                                                            <td class="align-middle text-break">
                                                                <span class="ps-10"
                                                                    v-text="formatNumber(item.total_cost)"></span>
                                                            </td>
                                                            <td class="align-middle text-break">
                                                                <span class="ps-10"
                                                                    v-text="formatNumber(item.total_income)"></span>
                                                            </td>
                                                            <td class="align-middle text-break">
                                                                <span v-text="item.shop_name"></span>
                                                            </td>
                                                        </tr>
                                                    </template>
                                                </tbody>
                                                <tfoot class="border-top border-1 fs-6 fw-bold">
                                                    <tr>
                                                        <td class="align-middle text-break"></td>
                                                        <td class="align-middle text-break">
                                                            <span class="ps-10" v-text="formatNumber(LiveTotal)"></span>
                                                        </td>
                                                        <td class="align-middle text-break">
                                                            <span class="ps-10"
                                                                v-text="formatNumber(LiveIncome)"></span>
                                                        </td>
                                                        <td class="align-middle text-break"></td>
                                                    </tr>
                                                </tfoot>
                                            </table>
                                        </div>
                                        <div class="d-flex justify-content-between align-items-center mt-3">
                                            <div class="d-flex">
                                                <div>
                                                    <select class="form-select w-80px h-35px" data-hide-search="true"
                                                        data-control="select2" id="page_size_live_select"
                                                        name="page_size_live_select">
                                                        <option value="10" selected>10</option>
                                                        <option value="20">20</option>
                                                        <option value="50">50</option>
                                                        <option value="100">100</option>
                                                    </select>
                                                </div>
                                                <div class="d-flex align-items-end ms-5">
                                                    <span>
                                                        กำลังแสดง
                                                        <span v-text="liveStartItem"></span>
                                                        ถึง
                                                        <span v-text="liveEndItem"></span>
                                                        จาก
                                                        <span v-text="totalTiktokItems"></span> รายการ
                                                        <span v-if="totalTiktokItems > 10"></span>
                                                    </span>
                                                </div>
                                            </div>
                                            <ul class="pagination">
                                                <li :class="['page-item', { disabled: currentTiktokPages === 1 }]"
                                                    @click="changeTiktokPage(currentTiktokPages - 1)">
                                                    <p class="page-link"><i class="previous"></i></p>
                                                </li>
                                                <li v-for="page_tiktok in pagesTiktok" :key="page_tiktok"
                                                    :class="['page-item', { active: currentTiktokPages === page_tiktok && page_tiktok !== '...' }]"
                                                    @click="changeTiktokPage(page_tiktok)">
                                                    <p class="page-link" v-if="page_tiktok !== '...'"
                                                        v-text="page_tiktok">
                                                    </p>
                                                    <span v-if="page_tiktok === '...'">...</span>
                                                </li>
                                                <li :class="['page-item', { disabled: currentTiktokPages === totalTiktokPages }]"
                                                    @click="changeTiktokPage(currentTiktokPages + 1)">
                                                    <p class="page-link"><i class="next"></i></p>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="card p-5 mt-5">
                                    <div class="ps-2 my-3 d-flex gap-4 align-items-center text-primary">
                                        <span class="m-0 fs-1 fw-bolder">Facebook</span>
                                        <!-- <img src="" alt="" width="35" height="35"> -->
                                        <i class="fs-1 bi-facebook"></i>
                                    </div>
                                    <div class="table-responsive border rounded-4">
                                        <table class="table table-row-dashed table-row-gray-300 gy-6 gs-7 mb-0">
                                            <thead>
                                                <tr class="fw-bold fs-4 ">
                                                    <th class="min-w-100px align-middle">
                                                        <div @click="sortFacebookTable('p_date')"
                                                            class="d-flex justify-content-around align-items-center">
                                                            <i class="bi-calendar3"></i>
                                                            <span>วันที่</span>
                                                            <i class="bi-chevron-down"
                                                                :class="getFacebookSortIcon('p_date')"></i>
                                                        </div>
                                                    </th>
                                                    <th class="min-w-200px align-middle">
                                                        <div @click="sortFacebookTable('name')"
                                                            class="d-flex justify-content-around align-items-center">
                                                            <i class="bi-type flex-shrink-1"></i>
                                                            <div class="row w-100 ms-2">
                                                                <span>ชื่อ</span>
                                                                <span>ADS</span>
                                                            </div>
                                                            <i class="bi-chevron-down"
                                                                :class="getFacebookSortIcon('name')"></i>
                                                        </div>
                                                    </th>
                                                    <th class="min-w-100px align-middle">
                                                        <div @click="sortFacebookTable('product')"
                                                            class="d-flex justify-content-around align-items-center">
                                                            <i class="bi-type"></i>
                                                            <div class="row">
                                                                <span>สินค้า</span>
                                                            </div>
                                                            <i class="bi-chevron-down"
                                                                :class="getFacebookSortIcon('product')"></i>
                                                        </div>
                                                    </th>
                                                    <th class="min-w-100px align-middle">
                                                        <div class="d-flex gap-3 align-items-center">
                                                            <div @click="sortFacebookTable('status')"
                                                                class="d-flex w-100 justify-content-around align-items-center pointer">
                                                                <i class="bi-toggles"></i>
                                                                <div class="row">
                                                                    <span>สถานะ</span>
                                                                </div>
                                                                <i class="bi-chevron-down"
                                                                    :class="getFacebookSortIcon('status')"></i>
                                                            </div>
                                                            <div class="flex-shrink-1">
                                                                <i @click="filterModal('สถานะ', 4)"
                                                                    class="pointer bi-funnel"></i>
                                                            </div>
                                                        </div>
                                                    </th>
                                                    <th class="min-w-100px align-middle">
                                                        <div @click="sortFacebookTable('total_cost')"
                                                            class="d-flex justify-content-around align-items-center">
                                                            <i class="bi-cash-stack"></i>
                                                            <div class="row ms-2">
                                                                <span>ค่าใช้จ่ายทั้งหมด</span>
                                                            </div>
                                                            <i class="bi-chevron-down"
                                                                :class="getFacebookSortIcon('total_cost')"></i>
                                                        </div>
                                                    </th>
                                                    <th class="min-w-100px align-middle">
                                                        <div @click="sortFacebookTable('budget')"
                                                            class="d-flex justify-content-around align-items-center">
                                                            <i class="bi-cash-stack"></i>
                                                            <div class="row">
                                                                <span>งบประมาณ</span>
                                                            </div>
                                                            <i class="bi-chevron-down"
                                                                :class="getFacebookSortIcon('budget')"></i>
                                                        </div>
                                                    </th>
                                                    <th class="min-w-150px align-middle">
                                                        <div @click="sortFacebookTable('total_shop_income')"
                                                            class="d-flex justify-content-around align-items-center">
                                                            <i class="bi-cash-stack"></i>
                                                            <div class="row">
                                                                <span>รายได้รวม(ร้านค้า)</span>
                                                            </div>
                                                            <i class="bi-chevron-down"
                                                                :class="getFacebookSortIcon('total_shop_income')"></i>
                                                        </div>
                                                    </th>
                                                    <th class="min-w-200px align-middle">
                                                        <div @click="sortFacebookTable('cost_per_purchase')"
                                                            class="d-flex justify-content-around align-items-center">
                                                            <i class="bi-cash-stack"></i>
                                                            <div class="row">
                                                                <span>ต้นทุนต่อการซื้อ(ร้านค้า)</span>
                                                            </div>
                                                            <i class="bi-chevron-down"
                                                                :class="getFacebookSortIcon('cost_per_purchase')"></i>
                                                        </div>
                                                    </th>
                                                    <th class="min-w-100px align-middle">
                                                        <div @click="sortFacebookTable('target_group')"
                                                            class="d-flex justify-content-around align-items-center">
                                                            <i class="bi-type flex-shrink-1"></i>
                                                            <div class="row w-100 ms-2">
                                                                <span>กลุ่มเป้าหมาย</span>
                                                            </div>
                                                            <i class="bi-chevron-down"
                                                                :class="getFacebookSortIcon('target_group')"></i>
                                                        </div>
                                                    </th>
                                                    <th class="min-w-100px align-middle">
                                                        <div @click="sortFacebookTable('note')"
                                                            class="d-flex justify-content-around align-items-center">
                                                            <i class="bi-type flex-shrink-1"></i>
                                                            <div class="row w-100 ms-2">
                                                                <span>Remark</span>
                                                            </div>
                                                            <i class="bi-chevron-down"
                                                                :class="getFacebookSortIcon('note')"></i>
                                                        </div>
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody class="fs-6">
                                                <template v-for="item in data_facebook">
                                                    <tr>
                                                        <td class="align-middle text-break">
                                                            <span v-text="utilsConvDate(item.p_date)"></span>
                                                        </td>
                                                        <td class="align-middle text-break">
                                                            <span v-text="item.name"></span>
                                                        </td>
                                                        <td class="align-middle text-break">
                                                            <span v-text="item.product"></span>
                                                        </td>
                                                        <td class="align-middle text-break text-center">
                                                            <span
                                                                v-if="item.status === 'เปิดใช้งาน' || item.status === 'active'"
                                                                v-text="'เปิดใช้งาน'" class="text-success"></span>
                                                            <span v-else v-text="'ปิดการใช้งาน'"
                                                                class="text-danger"></span>
                                                        </td>
                                                        <td class="align-middle text-break text-center">
                                                            <span v-text="formatNumber(item.total_cost)"></span>
                                                        </td>
                                                        <td class="align-middle text-break text-center">
                                                            <span v-text="formatNumber(item.budget)"></span>
                                                        </td>
                                                        <td class="align-middle text-break text-center">
                                                            <span v-text="formatNumber(item.total_shop_income)"></span>
                                                        </td>
                                                        <td class="align-middle text-break text-center">
                                                            <span v-text="formatNumber(item.cost_per_purchase)"></span>
                                                        </td>
                                                        <td class="align-middle text-break">
                                                            <span v-text="item.target_group"></span>
                                                        </td>
                                                        <td class="align-middle text-break">
                                                            <span v-text="item.note"></span>
                                                        </td>
                                                    </tr>
                                                </template>
                                            </tbody>
                                            <tfoot class="border-top border-1 fs-6 fw-bold">
                                                <tr>
                                                    <td class="align-middle text-break"></td>
                                                    <td class="align-middle text-break"></td>
                                                    <td class="align-middle text-break"></td>
                                                    <td class="align-middle text-break"></td>
                                                    <td class="align-middle text-break text-center"
                                                        v-text="formatNumber(FbTotal)">
                                                    </td>
                                                    <td class="align-middle text-break text-center"
                                                        v-text="formatNumber(FbBudget)"></td>
                                                    <td class="align-middle text-break text-center"
                                                        v-text="formatNumber(FbTotal_Incom)"></td>
                                                    <td class="align-middle text-break text-center"
                                                        v-text="formatNumber(FbCost_Per)"></td>
                                                    <td class="align-middle text-break"></td>
                                                    <td class="align-middle text-break"></td>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center mt-3">
                                        <div class="d-flex">
                                            <div>
                                                <select class="form-select w-80px h-35px" data-hide-search="true"
                                                    data-control="select2" id="page_size_facebook_select"
                                                    name="page_size_facebook_select">
                                                    <option value="10" selected>10</option>
                                                    <option value="20">20</option>
                                                    <option value="50">50</option>
                                                    <option value="100">100</option>
                                                </select>
                                            </div>
                                            <div class="d-flex align-items-end ms-5">
                                                <span>
                                                    กำลังแสดง
                                                    <span v-text="fbStartItem"></span>
                                                    ถึง
                                                    <span v-text="fbEndItem"></span>
                                                    จาก
                                                    <span v-text="totalFacebookItems"></span> รายการ
                                                    <span v-if="totalFacebookItems > 10"></span>
                                                </span>
                                            </div>
                                        </div>
                                        <ul class="pagination">
                                            <li :class="['page-item', { disabled: currentFacebookPages === 1 }]"
                                                @click="changeFacebookPage(currentFacebookPages - 1)">
                                                <p class="page-link"><i class="previous"></i></p>
                                            </li>
                                            <li v-for="page_facebook in pagesFacebook" :key="page_facebook"
                                                :class="['page-item', { active: currentFacebookPages === page_facebook && page_facebook !== '...' }]"
                                                @click="changeFacebookPage(page_facebook)">
                                                <p class="page-link" v-if="page_facebook !== '...'"
                                                    v-text="page_facebook">
                                                </p>
                                                <span v-if="page_facebook === '...'">...</span>
                                            </li>
                                            <li :class="['page-item', { disabled: currentFacebookPages === totalFacebookPages }]"
                                                @click="changeFacebookPage(currentFacebookPages + 1)">
                                                <p class="page-link"><i class="next"></i></p>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal fade" tabindex="-1" id="filter_model">
                    <div class="modal-dialog modal-dialog-centered modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h3 class="modal-title" v-text="modal_titles"></h3>

                                <!--begin::Close-->
                                <div class="btn btn-icon btn-sm btn-active-light-primary ms-2"
                                    @click="closeModalFilter">
                                    <i class="ki-duotone ki-cross fs-1"><span class="path1"></span><span
                                            class="path2"></span></i>
                                </div>
                                <!--end::Close-->
                            </div>

                            <div class="modal-body">
                                <div class="d-flex gap-5 flex-wrap">
                                    <template v-if="modal_session === 1">
                                        <template v-for="(item, index) in data_ads_tt">
                                            <div class="align-middle pe-3">
                                                <div class="form-check form-check-solid">
                                                    <input class="form-check-input" type="radio"
                                                        :checked="item.check_value"
                                                        @change="selectCheckValue(index, 'tt')"
                                                        :id="'check_product' + index" name="check_product" />
                                                    <label class="form-check-label text-dark" for="check_product"
                                                        v-text="item.name"></label>
                                                </div>
                                            </div>
                                        </template>
                                    </template>
                                    <template v-else-if="modal_session === 2">
                                        <template v-for="(item, index) in data_cost_shop">
                                            <div class="align-middle pe-3">
                                                <div class="form-check form-check-solid">
                                                    <input class="form-check-input" type="checkbox"
                                                        :checked="item.check_value" v-model="item.check_value"
                                                        :id="'check_product' + index" :name="'check_product' + index" />
                                                    <label class="form-check-label text-dark"
                                                        :for="'check_product' + index" v-text="item.name"></label>
                                                </div>
                                            </div>
                                        </template>
                                    </template>
                                    <template v-else-if="modal_session === 3">
                                        <template v-for="(item, index) in data_shop_tt">
                                            <div class="align-middle pe-3">
                                                <div class="form-check form-check-solid">
                                                    <input class="form-check-input" type="checkbox"
                                                        :checked="item.check_value" v-model="item.check_value"
                                                        :id="'check_product' + index" :name="'check_product' + index" />
                                                    <label class="form-check-label text-dark"
                                                        :for="'check_product' + index" v-text="item.name"></label>
                                                </div>
                                            </div>
                                        </template>
                                    </template>
                                    <template v-else-if="modal_session === 4">
                                        <template v-for="(item, index) in data_ads_fb">
                                            <div class="align-middle pe-3">
                                                <div class="form-check form-check-solid">
                                                    <input class="form-check-input" type="radio"
                                                        :checked="item.check_value"
                                                        @change="selectCheckValue(index, 'fb')"
                                                        :id="'check_product' + index" name="check_product" />
                                                    <label class="form-check-label text-dark" for="check_product"
                                                        v-text="item.name"></label>
                                                </div>
                                            </div>
                                        </template>
                                    </template>
                                </div>
                            </div>

                            <div class="modal-footer">
                                <button type="button" class="btn btn-danger" @click="resetCheckValue">รีเซ็ต</button>
                                <button type="button" class="btn btn-primary" @click="saveFilter">บันทึก</button>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</body>
<script>
    window.csrfToken = {{.csrf_token }};
    window.pageAction = {{.page_action }};
</script>
{{- template "resource-js" -}}
<script src="/page-ads/js/services.js" type="module"> </script>
<script src="/page-ads/js/index.js" type="module"> </script>

</html>